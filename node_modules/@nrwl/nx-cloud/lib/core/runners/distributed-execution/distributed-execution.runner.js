const a8_0x4c02=['executionStatus:\x20','readFileSync','../../error/print-run-group-error','tasks','\x20seconds.','note','configuration','stdout','../../api/error-reporter.api','startTask','No\x20new\x20completed\x20tasks\x20after\x20','encryptionKey','./distributed-execution.api','FileStorage','SIGINT','./split-task-graph-into-stages','createTaskGraph','success','runUrl','strictlyOrderedTargets','reset','Main\x20job\x20was\x20terminated\x20via\x20SIGTERM','target','../../../utilities/environment','Extracting\x20artifacts','Main\x20job\x20was\x20terminated\x20via\x20SIGINT','targetDependencies','__awaiter','terminalOutput','../../../utilities/waiter','Processing\x20task\x20','error','Starting\x20distributed\x20command\x20execution','executionId:\x20','then','hash','retrieve','createUnchangedValueTimeout','copyFilesFromCache','defineProperty','start','number\x20of\x20completed\x20tasks:\x20','push','Waiting...','VERBOSE_LOGGING','/nx.json','build','Successfully\x20completed\x20running\x20the\x20command.','TaskGraphCreator','values','dependencies','SIGTERM','exit','log','message','toString','value','./node_modules/.cache/nx','throw','Main\x20job\x20terminated\x20with\x20an\x20error:\x20\x22','Retrieving\x20artifacts\x20from\x20','get','NO_COMPLETED_TASKS_TIMEOUT','nxCloudDistributedTasksRunner','scheduleTask','commandStatus','status','../../file-storage/e2e-encryption','axiosException','completeRunGroupWithError','taskGraph','addVerticalSeparator','projectGraph','done','logCommand','assign','length','criticalErrorMessage','strip-json-comments','apply','lifeCycle','Waiter','getRunGroup','run','join','printRunGroupError','E2EEncryption','createStartRequest','../../../utilities/metric-logger','Command\x20execution\x20failed.','Distributed\x20Execution\x20Terminated','find','ENCRYPTION_KEY','completedTasks','See\x20run\x20details\x20at\x20','taskId','../../../utilities/nx-imports','parse','project','Error:'];(function(_0x857983,_0x4c0213){const _0x1cc7c3=function(_0x339d02){while(--_0x339d02){_0x857983['push'](_0x857983['shift']());}};_0x1cc7c3(++_0x4c0213);}(a8_0x4c02,0x87));const a8_0x1cc7=function(_0x857983,_0x4c0213){_0x857983=_0x857983-0x0;let _0x1cc7c3=a8_0x4c02[_0x857983];return _0x1cc7c3;};'use strict';var __awaiter=this&&this[a8_0x1cc7('0x5c')]||function(_0x636931,_0xa5994b,_0x24972d,_0x1af024){function _0x52f62c(_0x36c976){return _0x36c976 instanceof _0x24972d?_0x36c976:new _0x24972d(function(_0x2740ae){_0x2740ae(_0x36c976);});}return new(_0x24972d||(_0x24972d=Promise))(function(_0x5156c4,_0x552c68){function _0x5d1336(_0x378544){try{_0x39f254(_0x1af024['next'](_0x378544));}catch(_0x5c0013){_0x552c68(_0x5c0013);}}function _0x5a2bb8(_0x3caa9d){try{_0x39f254(_0x1af024[a8_0x1cc7('0x17')](_0x3caa9d));}catch(_0x38380b){_0x552c68(_0x38380b);}}function _0x39f254(_0x45cb26){_0x45cb26[a8_0x1cc7('0x26')]?_0x5156c4(_0x45cb26[a8_0x1cc7('0x15')]):_0x52f62c(_0x45cb26[a8_0x1cc7('0x15')])[a8_0x1cc7('0x63')](_0x5d1336,_0x5a2bb8);}_0x39f254((_0x1af024=_0x1af024[a8_0x1cc7('0x2c')](_0x636931,_0xa5994b||[]))['next']());});};Object[a8_0x1cc7('0x4')](exports,'__esModule',{'value':!![]});exports[a8_0x1cc7('0x1c')]=void 0x0;const fs_1=require('fs');const stripJsonComments=require(a8_0x1cc7('0x2b'));const create_unchanged_value_timeout_1=require('../../../utilities/create-unchanged-value-timeout');const environment_1=require(a8_0x1cc7('0x58'));const metric_logger_1=require(a8_0x1cc7('0x35'));const serializer_overrides_1=require('../../../utilities/serializer-overrides');const waiter_1=require(a8_0x1cc7('0x5e'));const error_reporter_api_1=require(a8_0x1cc7('0x49'));const print_run_group_error_1=require(a8_0x1cc7('0x43'));const e2e_encryption_1=require(a8_0x1cc7('0x20'));const file_storage_1=require('../../file-storage/file-storage');const distributed_execution_api_1=require(a8_0x1cc7('0x4d'));const split_task_graph_into_stages_1=require(a8_0x1cc7('0x50'));const task_graph_creator_1=require('./task-graph-creator');const {output,workspaceRoot,getOutputs,Cache}=require(a8_0x1cc7('0x3d'));class NoopLifeCycle{[a8_0x1cc7('0x1d')](_0x533791){}[a8_0x1cc7('0x4a')](_0x58a2bd){}['endTask'](_0x2b57b7,_0x1e6c15){}}function runDistributedExecution(_0x4570ca,_0xffbba5,_0x53d22c,_0x46f942,_0x4e5d81,_0x2b40d0,_0x3b4e7f){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x37c61c=yield _0x4570ca[a8_0x1cc7('0x5')]((0x0,distributed_execution_api_1[a8_0x1cc7('0x34')])(_0x2b40d0,(0x0,split_task_graph_into_stages_1['splitTasksIntoStages'])(_0x3b4e7f),_0xffbba5));return yield processTasks(_0x4570ca,_0x46f942,_0x4e5d81,_0xffbba5,_0x37c61c,Object[a8_0x1cc7('0xe')](_0x3b4e7f[a8_0x1cc7('0x44')]),_0x53d22c);});}function processTasks(_0x3586b6,_0x314af5,_0x438652,_0x464a75,_0x46d3c3,_0x4101d4,_0x956421){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5611be={};const _0xf21430=(0x0,create_unchanged_value_timeout_1[a8_0x1cc7('0x2')])({'title':a8_0x1cc7('0x4b')+environment_1[a8_0x1cc7('0x1b')]/0x3e8+a8_0x1cc7('0x45'),'timeout':environment_1[a8_0x1cc7('0x1b')]});const _0x50b5ac=new waiter_1[(a8_0x1cc7('0x2e'))]();while(!![]){if(environment_1[a8_0x1cc7('0x9')]){output[a8_0x1cc7('0x46')]({'title':a8_0x1cc7('0x8')});}yield _0x50b5ac['wait']();const _0x44eed2=yield _0x3586b6[a8_0x1cc7('0x1f')](_0x46d3c3);if(environment_1[a8_0x1cc7('0x9')]){output[a8_0x1cc7('0x46')]({'title':'Status\x20update','bodyLines':[a8_0x1cc7('0x62')+_0x46d3c3,a8_0x1cc7('0x41')+_0x44eed2['executionStatus'],a8_0x1cc7('0x6')+_0x44eed2[a8_0x1cc7('0x3a')][a8_0x1cc7('0x29')],'error:\x20'+_0x44eed2[a8_0x1cc7('0x2a')]]});}if(_0x44eed2[a8_0x1cc7('0x2a')]){output['error']({'title':a8_0x1cc7('0x37'),'bodyLines':[a8_0x1cc7('0x40'),_0x44eed2[a8_0x1cc7('0x2a')]]});process['exit'](0x1);}_0xf21430(_0x44eed2['completedTasks'][a8_0x1cc7('0x29')]);for(const _0x4879a9 of _0x44eed2[a8_0x1cc7('0x3a')]){if(_0x5611be[_0x4879a9[a8_0x1cc7('0x3c')]])continue;yield processTask(_0x314af5,_0x438652,_0x956421,_0x464a75,_0x4101d4,_0x4879a9);_0x50b5ac[a8_0x1cc7('0x55')]();_0x5611be[_0x4879a9['taskId']]=!![];}if(_0x44eed2['executionStatus']==='COMPLETED'){return{'commandStatus':_0x44eed2[a8_0x1cc7('0x1e')],'runUrl':_0x44eed2['runUrl']};}}});}function processTask(_0x1fbbf5,_0x5b70ee,_0x3d1c1a,_0x10957c,_0x3e72e0,_0x3ad8d9){return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a8_0x1cc7('0x9')]){output['note']({'title':a8_0x1cc7('0x5f')+_0x3ad8d9['taskId']});}const _0x2bfbbc=_0x3e72e0[a8_0x1cc7('0x38')](_0x1e558d=>_0x3ad8d9[a8_0x1cc7('0x3c')]===_0x1e558d['id']);if(!_0x2bfbbc){throw new Error('Found\x20unknown\x20task:\x20'+_0x3ad8d9[a8_0x1cc7('0x3c')]);}if(environment_1[a8_0x1cc7('0x9')]){output['note']({'title':a8_0x1cc7('0x19')+_0x3ad8d9['url']});}yield _0x1fbbf5[a8_0x1cc7('0x1')](_0x3ad8d9[a8_0x1cc7('0x0')],_0x3ad8d9['url'],_0x10957c['cacheDirectory']||a8_0x1cc7('0x16'));const _0x354168=yield _0x5b70ee[a8_0x1cc7('0x1a')](Object[a8_0x1cc7('0x28')](Object[a8_0x1cc7('0x28')]({},_0x2bfbbc),{'hash':_0x3ad8d9[a8_0x1cc7('0x0')]}));const _0x514e0d=getOutputs(_0x3d1c1a[a8_0x1cc7('0x25')]['nodes'],_0x2bfbbc);if(environment_1['VERBOSE_LOGGING']){output['note']({'title':a8_0x1cc7('0x59'),'bodyLines':_0x514e0d});}yield _0x5b70ee[a8_0x1cc7('0x3')](_0x3ad8d9[a8_0x1cc7('0x0')],_0x354168,_0x514e0d);output[a8_0x1cc7('0x27')](getCommand(_0x2bfbbc));process[a8_0x1cc7('0x48')]['write'](_0x354168[a8_0x1cc7('0x5d')]);output[a8_0x1cc7('0x24')]();});}function getCommand(_0x148b24){const _0x3a2c27=_0x148b24['target'][a8_0x1cc7('0x47')]?':'+_0x148b24[a8_0x1cc7('0x57')]['configuration']:'';return['nx',a8_0x1cc7('0x30'),_0x148b24[a8_0x1cc7('0x57')][a8_0x1cc7('0x3f')]+':'+_0x148b24[a8_0x1cc7('0x57')][a8_0x1cc7('0x57')]+_0x3a2c27,(0x0,serializer_overrides_1['serializeOverrides'])(_0x148b24)][a8_0x1cc7('0x31')]('\x20');}function attachSignalListenersToCompleteRunGroupOnError(_0x3a49cd,_0x59810d){process['on'](a8_0x1cc7('0x4f'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x3a49cd['completeRunGroupWithError'](_0x59810d,a8_0x1cc7('0x5a'));process[a8_0x1cc7('0x11')](0x1);}));process['on'](a8_0x1cc7('0x10'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x3a49cd[a8_0x1cc7('0x22')](_0x59810d,a8_0x1cc7('0x56'));process[a8_0x1cc7('0x11')](0x1);}));}const nxCloudDistributedTasksRunner=(_0x36fb73,_0x1874b9,_0x5765ed)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){if(environment_1[a8_0x1cc7('0x9')]){output[a8_0x1cc7('0x46')]({'title':a8_0x1cc7('0x61')});}_0x1874b9[a8_0x1cc7('0x2d')]=new NoopLifeCycle();const _0x2baa1f=(0x0,environment_1[a8_0x1cc7('0x2f')])();if(!_0x2baa1f){(0x0,print_run_group_error_1[a8_0x1cc7('0x32')])();return process[a8_0x1cc7('0x11')](0x1);}const _0x232411=new e2e_encryption_1[(a8_0x1cc7('0x33'))](environment_1[a8_0x1cc7('0x39')]||_0x1874b9[a8_0x1cc7('0x4c')]);const _0x3a7e03=new error_reporter_api_1['ErrorReporterApi'](_0x1874b9);const _0x58f140=new file_storage_1[(a8_0x1cc7('0x4e'))](_0x232411,_0x3a7e03,!![],![]);const _0xb8dc32=new Cache(_0x1874b9);const _0x5e75ae=new distributed_execution_api_1['DistributedExecutionApi'](_0x1874b9);attachSignalListenersToCompleteRunGroupOnError(_0x5e75ae,_0x2baa1f);try{const _0x1317b0=getTaskGraph(_0x5765ed,_0x36fb73,_0x1874b9);const _0x576854=yield runDistributedExecution(_0x5e75ae,_0x1874b9,_0x5765ed,_0x58f140,_0xb8dc32,_0x2baa1f,_0x1317b0);if(_0x576854[a8_0x1cc7('0x1e')]===0x0){output[a8_0x1cc7('0x52')]({'title':a8_0x1cc7('0xc'),'bodyLines':[a8_0x1cc7('0x3b')+_0x576854[a8_0x1cc7('0x53')]]});}else{output[a8_0x1cc7('0x60')]({'title':a8_0x1cc7('0x36'),'bodyLines':[a8_0x1cc7('0x3b')+_0x576854[a8_0x1cc7('0x53')]]});}yield(0x0,metric_logger_1['submitRunMetrics'])(_0x1874b9);process[a8_0x1cc7('0x11')](_0x576854[a8_0x1cc7('0x1e')]);}catch(_0x1ede5b){output['error']({'title':'Unable\x20to\x20complete\x20a\x20run.','bodyLines':[_0x1ede5b[a8_0x1cc7('0x13')]]});if(_0x1ede5b[a8_0x1cc7('0x21')]){console[a8_0x1cc7('0x12')](_0x1ede5b[a8_0x1cc7('0x21')]);}else{console['log'](_0x1ede5b);}try{yield _0x5e75ae['completeRunGroupWithError'](_0x2baa1f,a8_0x1cc7('0x18')+_0x1ede5b[a8_0x1cc7('0x13')]+'\x22');}finally{process['exit'](0x1);}}});exports[a8_0x1cc7('0x1c')]=nxCloudDistributedTasksRunner;function getTaskGraph(_0x3fa550,_0x58e956,_0x338235){if(_0x3fa550[a8_0x1cc7('0x23')]){return _0x3fa550[a8_0x1cc7('0x23')];}else{const _0x13b669=JSON[a8_0x1cc7('0x3e')](stripJsonComments((0x0,fs_1[a8_0x1cc7('0x42')])(workspaceRoot+a8_0x1cc7('0xa'))[a8_0x1cc7('0x14')]()));return new task_graph_creator_1[(a8_0x1cc7('0xd'))](_0x3fa550[a8_0x1cc7('0x25')],getDefaultDependencyConfigs(_0x13b669,_0x338235))[a8_0x1cc7('0x51')](_0x58e956);}}function getDefaultDependencyConfigs(_0x4498bc,_0x2eeb72){var _0x1472bc,_0x4e9f7d;const _0x1b86df=(_0x1472bc=_0x4498bc[a8_0x1cc7('0x5b')])!==null&&_0x1472bc!==void 0x0?_0x1472bc:{};const _0x4fd9ff=_0x2eeb72?(_0x4e9f7d=_0x2eeb72[a8_0x1cc7('0x54')])!==null&&_0x4e9f7d!==void 0x0?_0x4e9f7d:[a8_0x1cc7('0xb')]:[];for(const _0x321c45 of _0x4fd9ff){_0x1b86df[_0x321c45]=_0x1b86df[_0x321c45]||[];_0x1b86df[_0x321c45][a8_0x1cc7('0x7')]({'target':_0x321c45,'projects':a8_0x1cc7('0xf')});}return _0x1b86df;}