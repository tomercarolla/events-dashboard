const a0_0x3e3a=['NX_CLOUD_UNLIMITED_OUTPUT','path','params','../../../utilities/environment','push','toString','endTask','skipNxCache','collectTerminalOutput','toISOString','scheduledTasks','TRUNCATED\x0a\x0a','scheduleTask','node_modules','forEach','obfuscate','indexOf','CloudEnabledLifeCycle','Cannot\x20find\x20task\x20','cacheableOperations','startTask','status','runContext','MAX_CHARACTERS_SUCCESSFUL_TASK','../../../utilities/nx-imports','cache-miss','outputObfuscator','keys','target','statuses','length','terminalOutput','cache','cacheDirectory','npm:','task','hash','remote-cache-hit','MAX_CHARACTERS_FAILED_TASK','serializeOverrides','updateStartedTask','code','readFileSync','defineProperty','endTime','project','__esModule','endTasks','tasks','nodes','join','MAX_CHARACTERS_CACHED_TASK','readTerminalOutputFile','cleanUpHashDetails','startsWith','local-cache-hit','find','filter','runtime','cacheStatus'];(function(_0x2eeddd,_0x3e3a0d){const _0x2525be=function(_0x5fdc9f){while(--_0x5fdc9f){_0x2eeddd['push'](_0x2eeddd['shift']());}};_0x2525be(++_0x3e3a0d);}(a0_0x3e3a,0x129));const a0_0x2525=function(_0x2eeddd,_0x3e3a0d){_0x2eeddd=_0x2eeddd-0x0;let _0x2525be=a0_0x3e3a[_0x2eeddd];return _0x2525be;};'use strict';Object[a0_0x2525('0x2e')](exports,a0_0x2525('0x31'),{'value':!![]});exports['CloudEnabledLifeCycle']=void 0x0;const path=require(a0_0x2525('0x4'));const path_1=require(a0_0x2525('0x4'));const fs_1=require('fs');const environment_1=require(a0_0x2525('0x6'));const serializer_overrides_1=require('../../../utilities/serializer-overrides');const {workspaceRoot}=require(a0_0x2525('0x1b'));class CloudEnabledLifeCycle{constructor(_0x1a6315,_0xed2eda,_0x4a7b09,_0x459fa9,_0x4e643c,_0xf47727,_0x512ab9){this['runContext']=_0x1a6315;this[a0_0x2525('0x24')]=_0xed2eda;this[a0_0x2525('0xa')]=_0x4a7b09;this[a0_0x2525('0xb')]=_0x459fa9;this[a0_0x2525('0x16')]=_0x4e643c;this['outputObfuscator']=_0xf47727;this[a0_0x2525('0x33')]=_0x512ab9;}[a0_0x2525('0xf')](_0x1c43b2){this[a0_0x2525('0x19')][a0_0x2525('0xd')][a0_0x2525('0x7')](_0x1c43b2);}[a0_0x2525('0x17')](_0x26de63){this[a0_0x2525('0x33')]['push']({'taskId':_0x26de63['id'],'startTime':new Date()[a0_0x2525('0xc')](),'target':_0x26de63[a0_0x2525('0x1f')][a0_0x2525('0x1f')],'projectName':_0x26de63['target'][a0_0x2525('0x30')],'hash':_0x26de63[a0_0x2525('0x27')],'hashDetails':this[a0_0x2525('0x38')](_0x26de63['hashDetails']),'params':(0x0,serializer_overrides_1[a0_0x2525('0x2a')])(_0x26de63)});}[a0_0x2525('0x9')](_0x480235,_0x4f5433){let _0x516706;if(this['runContext'][a0_0x2525('0x20')][_0x480235[a0_0x2525('0x27')]]){_0x516706=this[a0_0x2525('0x19')][a0_0x2525('0x20')][_0x480235[a0_0x2525('0x27')]];}else{if(this[a0_0x2525('0x16')][a0_0x2525('0x13')](_0x480235['target'][a0_0x2525('0x1f')])>-0x1&&!this[a0_0x2525('0xa')]){_0x516706=a0_0x2525('0x3a');}else{_0x516706=a0_0x2525('0x1c');}}this[a0_0x2525('0x2b')](_0x480235,_0x4f5433,_0x516706);}[a0_0x2525('0x32')](_0x17ef79){for(let _0x5c952a of _0x17ef79){let _0x321e57;const _0x33807d=_0x5c952a[a0_0x2525('0x18')]==='remote-cache';const _0x39b96c=_0x5c952a[a0_0x2525('0x18')]===a0_0x2525('0x23');const _0x3a2e68=_0x5c952a[a0_0x2525('0x18')]==='local-cache'||_0x5c952a[a0_0x2525('0x18')]==='local-cache-kept-existing'||_0x39b96c;if(this['runContext'][a0_0x2525('0x20')][_0x5c952a['task']['hash']]){_0x321e57=this['runContext']['statuses'][_0x5c952a[a0_0x2525('0x26')][a0_0x2525('0x27')]];}else if(_0x33807d){_0x321e57=a0_0x2525('0x28');}else if(_0x3a2e68){_0x321e57=a0_0x2525('0x3a');}else{if(this[a0_0x2525('0x16')][a0_0x2525('0x13')](_0x5c952a[a0_0x2525('0x26')][a0_0x2525('0x1f')][a0_0x2525('0x1f')])>-0x1&&!this[a0_0x2525('0xa')]){_0x321e57=a0_0x2525('0x3a');}else{_0x321e57=a0_0x2525('0x1c');}}this['updateStartedTask'](_0x5c952a[a0_0x2525('0x26')],_0x5c952a[a0_0x2525('0x2c')],_0x321e57);}}['endCommand'](){}[a0_0x2525('0x2b')](_0x132f24,_0x594de1,_0x248d6f){const _0x2b5779=this[a0_0x2525('0x33')][a0_0x2525('0x3b')](_0x1f5274=>_0x1f5274['taskId']===_0x132f24['id']);if(!_0x2b5779){throw new Error(a0_0x2525('0x15')+_0x132f24['id']);}_0x2b5779[a0_0x2525('0x2f')]=new Date()[a0_0x2525('0xc')]();_0x2b5779['status']=_0x594de1;_0x2b5779[a0_0x2525('0x5')]=this['outputObfuscator']['obfuscate'](_0x2b5779[a0_0x2525('0x5')]);_0x2b5779[a0_0x2525('0x2')]=_0x248d6f;if(this['collectTerminalOutput']){_0x2b5779[a0_0x2525('0x22')]=this['getTerminalOutput'](_0x132f24[a0_0x2525('0x27')],_0x2b5779[a0_0x2525('0x2')],_0x594de1);}}['getTerminalOutput'](_0xcc94dd,_0x48a3fb,_0x496a25){let _0x2fe8ac;if(this[a0_0x2525('0x24')]){if(this['cacheDirectory'][a0_0x2525('0x39')]('./')){_0x2fe8ac=(0x0,path_1[a0_0x2525('0x35')])(workspaceRoot,this[a0_0x2525('0x24')]);}else{_0x2fe8ac=this[a0_0x2525('0x24')];}}else{_0x2fe8ac=(0x0,path_1[a0_0x2525('0x35')])(workspaceRoot,a0_0x2525('0x10'),'.cache','nx');}try{const _0x3274f8=this[a0_0x2525('0x37')](_0x2fe8ac,_0xcc94dd);const _0x19bfea=this[a0_0x2525('0x1d')][a0_0x2525('0x12')](_0x3274f8);if(environment_1[a0_0x2525('0x3')])return _0x19bfea;const _0x49481d=_0x48a3fb===a0_0x2525('0x1c')?_0x496a25===0x0?CloudEnabledLifeCycle[a0_0x2525('0x1a')]:CloudEnabledLifeCycle['MAX_CHARACTERS_FAILED_TASK']:CloudEnabledLifeCycle[a0_0x2525('0x36')];return _0x19bfea['length']>_0x49481d?a0_0x2525('0xe')+_0x19bfea['slice'](_0x19bfea[a0_0x2525('0x21')]-_0x49481d):_0x19bfea;}catch(_0x4c8d0c){return'';}}[a0_0x2525('0x38')](_0x5a4330){const _0x5a3012={};Object[a0_0x2525('0x1e')](_0x5a4330['nodes'])[a0_0x2525('0x0')](_0x247cf9=>!_0x247cf9[a0_0x2525('0x39')](a0_0x2525('0x25')))[a0_0x2525('0x11')](_0x11616e=>{_0x5a3012[_0x11616e]=_0x5a4330[a0_0x2525('0x34')][_0x11616e];});return{'nodes':_0x5a3012,'runtime':_0x5a4330[a0_0x2525('0x1')],'implicitDeps':_0x5a4330['implicitDeps']};}[a0_0x2525('0x37')](_0x7e0e2a,_0xb51d2c){try{return(0x0,fs_1[a0_0x2525('0x2d')])(path[a0_0x2525('0x35')](_0x7e0e2a,'terminalOutputs',_0xb51d2c))[a0_0x2525('0x8')]();}catch(_0x518887){try{return(0x0,fs_1[a0_0x2525('0x2d')])(path['join'](_0x7e0e2a,_0xb51d2c,a0_0x2525('0x22')))[a0_0x2525('0x8')]();}catch(_0x4f3b1b){return'';}}}}exports[a0_0x2525('0x14')]=CloudEnabledLifeCycle;CloudEnabledLifeCycle[a0_0x2525('0x29')]=0x30d40;CloudEnabledLifeCycle['MAX_CHARACTERS_SUCCESSFUL_TASK']=0x4e20;CloudEnabledLifeCycle[a0_0x2525('0x36')]=0x4e20;