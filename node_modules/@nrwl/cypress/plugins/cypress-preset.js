"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.nxE2EPreset = exports.nxBaseCypressPreset = void 0;
const devkit_1 = require("@nrwl/devkit");
const path_1 = require("path");
function nxBaseCypressPreset(pathToConfig) {
    const projectPath = (0, path_1.relative)(devkit_1.workspaceRoot, pathToConfig);
    const offset = (0, path_1.relative)(pathToConfig, devkit_1.workspaceRoot);
    const videosFolder = (0, path_1.join)(offset, 'dist', 'cypress', projectPath, 'videos');
    const screenshotsFolder = (0, path_1.join)(offset, 'dist', 'cypress', projectPath, 'screenshots');
    return {
        videosFolder,
        screenshotsFolder,
        video: true,
        chromeWebSecurity: false,
    };
}
exports.nxBaseCypressPreset = nxBaseCypressPreset;
/**
 * nx E2E Preset for Cypress
 * @description
 * this preset contains the base configuration
 * for your e2e tests that nx recommends.
 * you can easily extend this within your cypress config via spreading the preset
 * @example
 * export default defineConfig({
 *   e2e: {
 *     ...nxE2EPreset(__dirname)
 *     // add your own config here
 *   }
 * })
 *
 * @param pathToConfig will be used to construct the output paths for videos and screenshots
 */
function nxE2EPreset(pathToConfig) {
    return Object.assign(Object.assign({}, nxBaseCypressPreset(pathToConfig)), { fileServerFolder: '.', supportFile: 'src/support/e2e.ts', specPattern: 'src/**/*.cy.{js,jsx,ts,tsx}', fixturesFolder: 'src/fixtures' });
}
exports.nxE2EPreset = nxE2EPreset;
//# sourceMappingURL=cypress-preset.js.map