"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addLoadChildren = void 0;
const devkit_1 = require("@nrwl/devkit");
const ts = require("typescript");
const ast_utils_1 = require("../../../utils/nx-devkit/ast-utils");
function addLoadChildren(host, options) {
    if (!host.exists(options.parentModule)) {
        throw new Error(`Cannot find '${options.parentModule}'`);
    }
    const moduleSource = host.read(options.parentModule).toString('utf-8');
    const sourceFile = ts.createSourceFile(options.parentModule, moduleSource, ts.ScriptTarget.Latest, true);
    (0, ast_utils_1.addRoute)(host, options.parentModule, sourceFile, `{path: '${(0, devkit_1.names)(options.fileName).fileName}', loadChildren: () => import('${options.importPath}').then(module => module.${options.standalone
        ? `${(0, devkit_1.names)(options.name).className.toUpperCase()}_ROUTES`
        : options.moduleName})}`);
}
exports.addLoadChildren = addLoadChildren;
//# sourceMappingURL=add-load-children.js.map